<div class="container-fluid">
  <ol class="breadcrumb">
    <li class="breadcrumb-item">
      <a routerLink="/software">Dashboard</a>
    </li>
    <li class="breadcrumb-item active">Cards</li>
  </ol>
  <mat-tab-group [selectedIndex]="selected.value" (selectedIndexChange)="selected.setValue($event)" (selectedTabChange)="onCardTabClick($event)">
    <mat-tab *ngFor="let tab of tabs; let index = index" [label]="tab.tabName">
      <br />

      <div *ngIf="showCardListTab">
        <div class="card card-default">
          <div class="card-header" align="right">
            <button type="button" class="btn btn-primary" style="margin-right: 5px;" (click)="btnDetailCard(true)">
              <i class="fa fa-plus fa-fw"></i>Add
            </button>
            <button type="button" class="btn btn-danger" routerLink="/software">
              <i class="fa fa-close fa-fw"></i>Close
            </button>
          </div>
          <div class="card-body">
            <mat-progress-bar [hidden]="isProgressBarHidden" [color]="'primary'" [mode]="'indeterminate'"></mat-progress-bar>
            <wj-flex-grid #cardsFlexGrid [itemsSource]="cardsCollectionView" [selectionMode]="3" [frozenColumns]="2">
              <wj-flex-grid-filter></wj-flex-grid-filter>
              <wj-flex-grid-column [header]="Edit" [isReadOnly]="true" [width]="95">
                <ng-template wjFlexGridCellTemplate [cellType]="'Cell'">
                  <button type="button" class="btn btn-primary btn-block btn-xs" (click)="btnDetailCard(false)">
                    <i class="fa fa-edit fa-fw"></i> Edit
                  </button>
                </ng-template>
              </wj-flex-grid-column>
              <wj-flex-grid-column [header]="Delete" [isReadOnly]="true" [width]="95">
                <ng-template wjFlexGridCellTemplate [cellType]="'Cell'">
                  <button type="button" class="btn btn-danger btn-block btn-xs" (click)="btnDeleteCardClick(deleteCardModalTemplate)">
                    <i class="fa fa-trash fa-fw"></i> Delete
                  </button>
                </ng-template>
              </wj-flex-grid-column>
              <wj-flex-grid-column [header]="'Card No.'" [binding]="'CardNumber'" [isReadOnly]="true" [width]="'2*'"></wj-flex-grid-column>
              <wj-flex-grid-column [header]="'Balance'" [binding]="'Balance'" [isReadOnly]="true" [width]="'2*'"></wj-flex-grid-column>
              <wj-flex-grid-column [header]="'Particulars'" [binding]="'Particulars'" [isReadOnly]="true" [width]="'4*'"></wj-flex-grid-column>
            </wj-flex-grid>
          </div>
          <div class="card-footer">
            <div class="col-sm-12 btn-group" style="padding: 5px 0px 5px 0px;">
              <button type="button" class="btn btn-secondary" (click)="cardsCollectionView.moveToFirstPage()">
                <i class="fa fa-fast-backward"></i>
              </button>
              <button type="button" class="btn btn-secondary" (click)="cardsCollectionView.moveToPreviousPage()">
                <i class="fa fa-step-backward"></i>
              </button>
              <button type="button" class="btn btn-secondary" disabled style="width:100px">
                {{ cardsCollectionView.pageIndex + 1 }} / {{ cardsCollectionView.pageCount }}
              </button>
              <button type="button" class="btn btn-secondary" (click)="cardsCollectionView.moveToNextPage()">
                <i class="fa fa-step-forward"></i>
              </button>
              <button type="button" class="btn btn-secondary" (click)="cardsCollectionView.moveToLastPage()">
                <i class="fa fa-fast-forward"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="showCardDetailTab">
        <div class="card card-default">
          <div class="card-header" align="right">
            <button type="button" class="btn btn-primary" style="margin-right: 5px;">
              <i class="fa fa-save fa-fw"></i>Save
            </button>
            <button type="button" class="btn btn-primary" style="margin-right: 5px;">
              <i class="fa fa-edit fa-fw"></i>Edit
            </button>
            <button type="button" class="btn btn-danger" (click)="removeCardTab(index)">
              <i class="fa fa-close fa-fw"></i>Close
            </button>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col">
                <div class="form-container">
                  <mat-form-field>
                    <input matInput placeholder="Card Number" [disabled]="isFieldDisabled" [(ngModel)]="listCards[cardIndex].CardNumber" autocomplete="off"
                      autocorrect="off" autocapitalize="off" spellcheck="false">
                  </mat-form-field>
                  <mat-form-field>
                    <input matInput placeholder="Name" [disabled]="isFieldDisabled" [(ngModel)]="listCards[cardIndex].CardNumber" autocomplete="off"
                      autocorrect="off" autocapitalize="off" spellcheck="false">
                  </mat-form-field>
                  <mat-form-field>
                    <input matInput placeholder="Email Address" [disabled]="isFieldDisabled" [(ngModel)]="listCards[cardIndex].CardNumber" autocomplete="off"
                      autocorrect="off" autocapitalize="off" spellcheck="false">
                  </mat-form-field>
                  <mat-form-field>
                    <input matInput placeholder="Check Balance" [disabled]="isFieldDisabled" [(ngModel)]="listCards[cardIndex].Balance" autocomplete="off"
                      autocorrect="off" autocapitalize="off" spellcheck="false" style="text-align: right;" value="0.00">
                  </mat-form-field>
                </div>
              </div>
              <div class="col">
                <div class="form-container">
                  <mat-form-field>
                    <textarea matInput placeholder="Address" rows="5" style="height: 87px; resize: none;" autocomplete="off" autocorrect="off"
                      autocapitalize="off" spellcheck="false"></textarea>
                  </mat-form-field>
                  <mat-form-field>
                    <input matInput placeholder="Contact Number" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                  </mat-form-field>
                  <mat-form-field>
                    <mat-select placeholder="Status">
                      <mat-option [value]="'Enable'">Enable</mat-option>
                      <mat-option [value]="'Disable'">Disable</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </mat-tab>
  </mat-tab-group>
</div>

<ng-template #deleteCardModalTemplate>
  <div class="modal-header">
    <h4 class="modal-title">Delete</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    Are you sure you want to delete this card?
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-danger" style="margin-right: 5px;">
      <i class="fa fa-trash fa-fw"></i>Delete
    </button>
    <button type="button" class="btn" (click)="modalRef.hide()">
      <i class="fa fa-close fa-fw"></i>Close
    </button>
  </div>
</ng-template>